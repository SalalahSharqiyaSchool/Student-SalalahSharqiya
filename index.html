<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø¨ÙˆØ§Ø¨Ø© ØµÙ„Ø§Ù„Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        :root {
            --bg-deep: #020d0c;
            --primary-gold: #c5a059;
            --soft-gold: #e2c28d;
            --glass: rgba(255, 255, 255, 0.03);
            --border-glass: rgba(255, 255, 255, 0.1);
            --accent-green: #0a3d34;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }

        body {
            font-family: 'Almarai', sans-serif;
            background: var(--bg-deep);
            color: #fff;
            overflow-x: hidden;
            background-attachment: fixed;
            /* Ø®Ù„ÙÙŠØ© Ù…ØªØ­Ø±ÙƒØ© Ù†Ø§Ø¹Ù…Ø© */
            background-image: 
                radial-gradient(circle at 0% 0%, var(--accent-green) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(197, 160, 89, 0.05) 0%, transparent 50%);
        }

        /* --- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹ØµØ±ÙŠ Ø§Ù„Ù…Ø¯Ù…Ø¬ --- */
        .smart-header {
            padding: 40px 5%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), transparent);
            border-bottom: 1px solid var(--border-glass);
            margin-bottom: 50px;
            animation: slideDown 1s ease;
        }

        .header-grid {
            max-width: 1400px;
            margin: auto;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: 30px;
        }

        .info-block { color: #fff; }
        .info-block.right { text-align: right; }
        .info-block.left { text-align: left; }
        
        .info-block h1 { font-size: 1.4rem; color: var(--primary-gold); font-weight: 800; letter-spacing: 1px; }
        .info-block p { font-size: 0.9rem; opacity: 0.8; margin-top: 5px; }

        .main-logo img {
            height: 130px;
            filter: drop-shadow(0 0 25px rgba(197, 160, 89, 0.2));
            transform: scale(1);
        }
        .main-logo img:hover { transform: scale(1.05) rotate(2deg); }

        /* --- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ --- */
        .content-wrapper { width: 92%; max-width: 1200px; margin: auto; }

        /* --- Bento Grid Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ --- */
        .bento-grid {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
            animation: fadeIn 1s ease 0.3s backwards;
        }

        .bento-item {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-glass);
            border-radius: 24px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .bento-item::after {
            content: ""; position: absolute; top: 0; right: 0; width: 100%; height: 100%;
            background: linear-gradient(225deg, transparent 80%, rgba(197, 160, 89, 0.05));
        }

        .bento-item i { font-size: 1.8rem; color: var(--primary-gold); margin-bottom: 15px; }
        .bento-item .label { font-size: 0.8rem; opacity: 0.6; margin-bottom: 8px; font-weight: 700; }
        .bento-item .value { font-size: 1.2rem; font-weight: 800; color: var(--soft-gold); }

        /* --- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Modern Dark) --- */
        .results-card {
            background: var(--glass);
            border-radius: 30px;
            border: 1px solid var(--border-glass);
            overflow: hidden;
            animation: fadeIn 1s ease 0.6s backwards;
        }

        table { width: 100%; border-collapse: collapse; }
        th { padding: 25px; background: rgba(255,255,255,0.02); text-align: right; color: var(--primary-gold); font-size: 0.9rem; }
        td { padding: 20px 25px; border-bottom: 1px solid var(--border-glass); font-size: 1.05rem; }
        tr:last-child td { border: none; }
        tr:hover { background: rgba(197, 160, 89, 0.03); }

        .grade-chip {
            background: rgba(197, 160, 89, 0.1);
            color: var(--primary-gold);
            padding: 8px 16px;
            border-radius: 12px;
            font-weight: 800;
            border: 1px solid rgba(197, 160, 89, 0.2);
        }

        /* --- Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹ØµØ±ÙŠ --- */
        .search-container {
            text-align: center;
            padding: 100px 0;
            max-width: 500px;
            margin: auto;
        }

        .search-box {
            background: var(--glass);
            padding: 40px;
            border-radius: 35px;
            border: 1px solid var(--border-glass);
            box-shadow: 0 30px 60px rgba(0,0,0,0.5);
        }

        .search-box input {
            width: 100%; padding: 20px; border-radius: 18px; border: 2px solid var(--border-glass);
            background: rgba(0,0,0,0.2); color: #fff; font-size: 1.5rem; text-align: center; outline: none;
            margin-bottom: 25px;
        }
        .search-box input:focus { border-color: var(--primary-gold); }

        .modern-btn {
            width: 100%; padding: 20px; border-radius: 18px; border: none;
            background: var(--primary-gold); color: var(--bg-deep);
            font-weight: 800; font-size: 1.1rem; cursor: pointer;
            box-shadow: 0 10px 25px rgba(197, 160, 89, 0.3);
        }
        .modern-btn:hover { transform: translateY(-3px); box-shadow: 0 15px 35px rgba(197, 160, 89, 0.4); }

        /* --- Ø²Ø± Ø§Ù„Ù…Ø­Ù„Ù„ Ø§Ù„Ø¹Ø§Ø¦Ù… --- */
        #ai-btn {
            position: fixed; bottom: 35px; right: 35px; width: 75px; height: 75px;
            background: var(--primary-gold); color: var(--bg-deep); border-radius: 24px;
            border: none; cursor: pointer; font-size: 32px; z-index: 1000;
            box-shadow: 0 15px 45px rgba(0,0,0,0.4);
            animation: bounce 2s infinite;
        }

        /* --- ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© --- */
        @media print {
            body { background: white !important; color: black !important; }
            .no-print, #ai-btn { display: none !important; }
            .smart-header { padding: 15px 0 !important; margin-bottom: 20px !important; border-bottom: 2px solid #000 !important; }
            .main-logo img { height: 70px !important; }
            .info-block h1, .info-block p { color: #000 !important; font-size: 10pt !important; }
            .bento-grid { display: flex !important; gap: 10px !important; }
            .bento-item { border: 1px solid #000 !important; flex: 1; padding: 10px !important; background: none !important; }
            .bento-item i { display: none; }
            .bento-item .value { color: #000 !important; font-size: 11pt !important; }
            table, th, td { border: 1px solid #000 !important; color: #000 !important; font-size: 10pt !important; }
            .grade-chip { background: none !important; border: none !important; padding: 0 !important; font-weight: bold !important; }
        }

        @media (max-width: 768px) {
            .header-grid { grid-template-columns: 1fr; text-align: center; }
            .info-block { text-align: center !important; }
            .bento-grid { grid-template-columns: 1fr; }
        }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    </style>
</head>
<body>

<header class="smart-header">
    <div class="header-grid">
        <div class="info-block right">
            <h1>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ±Ø¨ÙŠØ© ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ…</h1>
            <p>Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø© Ø¨Ù…Ø­Ø§ÙØ¸Ø© Ø¸ÙØ§Ø±</p>
            <p>Ù…Ø¯Ø±Ø³Ø© ØµÙ„Ø§Ù„Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ© (5-9)</p>
        </div>
        <div class="main-logo">
            <img src="logo.png" alt="Logo">
        </div>
        <div class="info-block left">
            <h1>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</h1>
            <p>Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„ | 2026/2025</p>
            <p id="liveTime"></p>
        </div>
    </div>
</header>

<div class="content-wrapper">
    <section id="searchView" class="search-container">
        <div class="search-box">
            <h2 style="margin-bottom: 25px; color: var(--primary-gold);">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø°ÙƒÙŠØ©</h2>
            <input type="text" id="civilInput" inputmode="numeric" placeholder="Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠ Ù„Ù„Ø·Ø§Ù„Ø¨">
            <button class="modern-btn" onclick="searchStudent()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… <i class="fa-solid fa-arrow-left" style="margin-right:10px"></i></button>
        </div>
    </section>

    <section id="resultView" style="display:none;">
        <div class="bento-grid">
            <div class="bento-item">
                <i class="fa-solid fa-user-shield"></i>
                <span class="label">Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠØ©</span>
                <span class="value" id="resName">-</span>
            </div>
            <div class="bento-item">
                <i class="fa-solid fa-layer-group"></i>
                <span class="label">Ø§Ù„ØµÙ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</span>
                <span class="value" id="resClass">-</span>
            </div>
            <div class="bento-item" style="background: rgba(197, 160, 89, 0.1);">
                <i class="fa-solid fa-chart-simple"></i>
                <span class="label">Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¹Ø§Ù…</span>
                <span class="value" id="resAvg" style="font-size: 1.8rem;">0%</span>
            </div>
        </div>

        <div class="results-card">
            <table>
                <thead>
                    <tr>
                        <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
                        <th style="text-align:center">Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</th>
                        <th style="text-align:center">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</th>
                    </tr>
                </thead>
                <tbody id="resTable"></tbody>
            </table>
        </div>

        <div class="no-print" style="margin-top: 50px; display: flex; justify-content: center; gap: 15px;">
            <button class="modern-btn" style="width: auto; padding: 18px 50px;" onclick="window.print()"><i class="fa-solid fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø´Ù‡Ø§Ø¯Ø©</button>
            <button class="modern-btn" style="width: auto; padding: 18px 50px; background: transparent; border: 1px solid var(--primary-gold); color: #fff;" onclick="location.reload()">Ø®Ø±ÙˆØ¬</button>
        </div>
    </section>
</div>

<button id="ai-btn" class="no-print" onclick="toggleChat()">ğŸ¤–</button>

<script>
    // Ø¹Ø±Ø¶ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
    setInterval(() => {
        const d = new Date();
        document.getElementById('liveTime').innerText = d.toLocaleDateString('ar-OM', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    }, 1000);

    let studentData = null;

    async function searchStudent() {
        const id = document.getElementById('civilInput').value.trim();
        const files = ["grade5.json", "grade6.json", "grade7.json", "grade8.json", "grade9.json"];
        
        for(let f of files) {
            try {
                const r = await fetch(f);
                const data = await r.json();
                studentData = data.find(s => s["Ø±Ù‚Ù…_Ù…Ø¯Ù†ÙŠ"].toString() === id);
                if(studentData) { renderResult(); return; }
            } catch(e) {}
        }
        alert("ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯Ù†ÙŠØŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªÙŠØ¬Ø©.");
    }

    function renderResult() {
        const subs = Object.keys(studentData).filter(k => !["Ø±Ù‚Ù…_Ù…Ø¯Ù†ÙŠ", "Ø§Ù„Ø§Ø³Ù…", "Ø§Ù„ØµÙ", "Ø§Ù„Ø´Ø¹Ø¨Ø©"].includes(k));
        const avg = (subs.reduce((a, b) => a + parseFloat(studentData[b] || 0), 0) / subs.length).toFixed(1);
        
        document.getElementById('resName').innerText = studentData["Ø§Ù„Ø§Ø³Ù…"];
        document.getElementById('resClass').innerText = `Ø§Ù„ØµÙ ${studentData["Ø§Ù„ØµÙ"]} / ${studentData["Ø§Ù„Ø´Ø¹Ø¨Ø©"]}`;
        document.getElementById('resAvg').innerText = avg + "%";
        
        document.getElementById('resTable').innerHTML = subs.map(s => {
            const v = parseFloat(studentData[s]);
            let appraisal = v>=90?'Ø§Ù…ØªÙŠØ§Ø²':v>=80?'Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹':v>=65?'Ø¬ÙŠØ¯':'Ù…Ù‚Ø¨ÙˆÙ„';
            return `<tr><td>${s}</td><td align="center"><span class="grade-chip">${v}</span></td><td align="center">${appraisal}</td></tr>`;
        }).join('');
        
        document.getElementById('searchView').style.display = 'none';
        document.getElementById('resultView').style.display = 'block';
        document.getElementById('ai-btn').style.display = 'flex';
    }

    function toggleChat() { 
        // Ø³ÙŠØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù†ÙØ³ Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚ Ù‡Ù†Ø§ Ù„Ø±Ø¨Ø·Ù‡ Ø¨Ø§Ù„Ù€ AI
    }
</script>
</body>
</html>
